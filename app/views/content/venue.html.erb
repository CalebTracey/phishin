<div id="header_container">
  <div id="header">
    <%= content_tag :h1, "Venue: #{@venue.name.html_safe}" %>
    <%= content_tag :h3, pluralize(@venue.shows_count, 'show') %>
    <% #render partial: 'header_filter', locals: { current_title: 'Sort Chronologically', item_hash: {'Sort Chronologically' => '?sort=show_date', 'Sort by Likes' => '?sort=likes', 'Sort by City' => '?sort=city', 'Sort by State' => '?sort=state', 'Sort by Venue' => '?sort=venue'} } %>
  </div>
</div>
  
<div id="content">
  
  <% if @shows.empty? %>
    <h1>No shows at this venue...</h1>
  <% end %>
  
  <% last_title = false %>
  <% @shows.each_with_index do |show, idx| %>

    <% title = show.date.strftime("%Y") %>
    <% if title != last_title %>
      <% if last_title %>
        </ul>
      <% end %>
      <% last_title = title %>
      <%= content_tag 'h1', title %>
      <ul class="item_list clickable">
    <% end %>

      <li>
        <%= content_tag :h2, link_to(show.date.strftime("%b %-d"), "/#{show.date}") %>
        <%= content_tag :h4, link_to(show.venue.name, "/#{show.venue.slug}") %>
        <%= content_tag :h5, link_to(show.venue.location, "/cities") %>
        <%= render partial: 'shared/context_menu_for_show', locals: { show: show, viewing_this_show: false } %>
        <%= likable(show, @shows_likes[idx], 'small') %>
        <div style="clear: both;"></div>
      </li>
    <% end %>
  </ul>

</div>
